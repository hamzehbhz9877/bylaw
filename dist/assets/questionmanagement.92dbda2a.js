import{r as m,b as c,j as e,f as x,s as O,v as b,F as v,i as y,w as M,x as w,y as T,z as R,A as B,B as I,C as j}from"./index.0069aa58.js";import{J as A,T as $,N as P}from"./jalalimoment.332938a7.js";import{M as C,a as g,b as f,u as Q}from"./useModal.36137a24.js";import{I as S}from"./isimage.c1c7af8e.js";import{M as F}from"./index.9299de40.js";import"./useIsMutating.d69a0b5f.js";const q=({initValue:s})=>{const[r,t]=m.exports.useState(s);return m.exports.useEffect(()=>{s&&t(s)},[s]),{setFile:t,file:r,changeFile:n=>{const u=new FileReader,d=n.target.files&&n.target.files[0];d&&(u.readAsDataURL(d),u.onload=()=>{const i=u==null?void 0:u.result;t(i)})}}},_=({title:s,index:r,data:t,changeValue:l})=>{const[n,u]=m.exports.useState({type:"text",value:t!=null?t:""});m.exports.useEffect(()=>{t&&u({...n,value:t})},[t]);const d=a=>{u({...n,value:"",type:a})},i=a=>u({...n,value:a.target.value}),{file:o,changeFile:p}=q({initValue:t&&S(t)?t:""});return m.exports.useEffect(()=>{l&&l(n.value)},[n]),c("div",{className:"p-4 border-bottom",children:[c("h6",{children:[s,":"]}),e("div",{className:"text-center mb-3",children:n.type==="text"?e("button",{className:"btn btn-warning",onClick:()=>d("image"),children:"\u062A\u063A\u06CC\u06CC\u0631 \u0628\u0647 \u062A\u0635\u0648\u06CC\u0631"}):e("button",{className:"btn btn-success",onClick:()=>d("text"),children:"\u062A\u063A\u06CC\u06CC\u0631 \u0628\u0647 \u0645\u062A\u0646"})}),n.type==="text"?e("input",{value:n.value,onChange:a=>i(a),className:"form-control",type:"txt"}):c("div",{className:"questions-format__body-image",children:[e("input",{accept:".jpg,.png,.svg",id:`file-option${r}`,className:"form-control",onChange:a=>p(a),type:"file",hidden:!0}),e("label",{htmlFor:`file-option${r}`,children:n.type==="image"?e("div",{className:"text-center mx-auto",children:e("img",{className:"h-100 ",src:o,alt:""})}):e("span",{className:"btn btn-primary",children:"\u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0635\u0648\u06CC\u0631"})})]})]})},k=({data:s,changeValue:r})=>{const[t,l]=m.exports.useState(""),{file:n,changeFile:u,setFile:d}=q({initValue:s==null?void 0:s.image});return m.exports.useEffect(()=>{s&&(l(s.text),d(s.image))},[s]),m.exports.useEffect(()=>{r&&r({text:t,image:n})},[t,n]),c("div",{className:"p-4 border-bottom",children:[e("h6",{children:"\u0639\u0646\u0648\u0627\u0646:"}),c("div",{children:[e("div",{className:"mb-4",children:e("textarea",{value:t,onChange:i=>l(i.target.value),className:"form-control",placeholder:"\u0639\u0646\u0648\u0627\u0646 \u0633\u0648\u0627\u0644 ..."})}),c("div",{children:[n&&e("button",{className:"btn btn-danger mb-3",onClick:()=>{d("")},children:"\u062D\u0630\u0641 \u062A\u0635\u0648\u06CC\u0631"}),c("div",{className:"questions-format__header-image",children:[e("input",{accept:".jpg,.png,.svg",id:"file",className:"form-control",onChange:i=>u(i),type:"file",hidden:!0}),e("label",{htmlFor:"file",children:n?e("div",{className:"text-center mx-auto",children:e("img",{className:"h-100 ",src:n,alt:""})}):e("span",{className:"btn btn-primary",children:"\u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0635\u0648\u06CC\u0631"})})]})]})]})]})},D=({initCorrectOption:s,changeValue:r})=>{const[t,l]=m.exports.useState(s),n=u=>{l(Number(u.target.value))};return m.exports.useEffect(()=>{s&&l(s)},[s]),m.exports.useEffect(()=>{r&&r(Number(t))},[t]),c("div",{className:"pt-4",children:[e("h6",{children:"\u0627\u0646\u062A\u062E\u0627\u0628 \u06AF\u0632\u06CC\u0646\u0647 \u0635\u062D\u06CC\u062D:"}),e("div",{className:"form-group d-flex justify-content-center questions-format__body-correct-option",children:[1,2,3,4].map(u=>c("div",{className:"form-check",children:[e("input",{className:"form-check-input",onChange:n,"aria-required":!0,type:"radio",name:"exampleRadios",id:`exampleRadios${u}`,value:u,checked:t===u}),e("label",{className:"form-check-label",htmlFor:`exampleRadios${u}`,children:u})]},u))})]})},V=({close:s})=>{const r=m.exports.useRef([]),[t,l]=m.exports.useState(null),[n,u]=m.exports.useState(null),{mutate:d}=x({event:O,options:{onSuccess:async()=>{await b.invalidateQueries("testManagement"),s()}}}),i=()=>{const[o,p,a,h]=r.current;n&&t&&d({title:n,optionA:o,optionB:p,optionC:a,optionD:h,correctOption:t})};return c(v,{children:[e(C,{children:e("h4",{className:"text-center",children:"\u0627\u0641\u0632\u0648\u062F\u0646 \u0633\u0648\u0627\u0644"})}),c(g,{children:[e(k,{changeValue:o=>u(o)}),[1,2,3,4].map((o,p)=>e(_,{changeValue:a=>r.current[p]=a,index:p,title:`\u062C\u0648\u0627\u0628 ${p+1}`},p)),e(D,{changeValue:o=>l(o)})]}),e(f,{children:e("div",{className:"text-center",children:e(F,{className:"btn btn-success",onClick:i,children:"\u062A\u0627\u06CC\u06CC\u062F"})})})]})},H=({id:s,close:r})=>{const{data:t}=y({event:M,values:s,eventOption:{queryKey:["getSingleQuestion",s]},options:{cacheTime:0}}),[l,n]=m.exports.useState([]);return m.exports.useEffect(()=>{t&&n([{option:t==null?void 0:t.optionA,id:"1"},{option:t==null?void 0:t.optionB,id:"2"},{option:t==null?void 0:t.optionC,id:"3"},{option:t==null?void 0:t.optionD,id:"4"}])},[t]),c("div",{children:[e(C,{children:e("h4",{className:"text-center",children:"\u0645\u0634\u0627\u0647\u062F\u0647 \u0633\u0648\u0627\u0644"})}),c(g,{children:[c("div",{className:"p-4 border-bottom",children:[e("h6",{children:"\u0639\u0646\u0648\u0627\u0646:"}),c("div",{children:[e("div",{className:"mb-5",children:e("textarea",{value:t==null?void 0:t.title.text,readOnly:!0,className:"form-control",placeholder:"\u0639\u0646\u0648\u0627\u0646 \u0633\u0648\u0627\u0644 ..."})}),(t==null?void 0:t.title.image)&&e("div",{className:"text-center mx-auto questions-format__header-image",children:e("img",{className:"h-100",src:t.title.image,alt:""})})]})]}),l==null?void 0:l.map((u,d)=>{var i;return c("div",{className:"p-4 border-bottom",children:[c("h6",{children:["\u062C\u0648\u0627\u0628 ",d+1,":"]}),S((i=u==null?void 0:u.option)!=null?i:"")?e("div",{className:"text-center mx-auto questions-format__body-image",children:e("img",{className:"h-100",src:u.option,alt:""})}):e("input",{defaultValue:u.option,className:"form-control",type:"txt",readOnly:!0})]},u.id)}),c("div",{className:"pt-4",children:[e("h6",{children:" \u06AF\u0632\u06CC\u0646\u0647 \u0635\u062D\u06CC\u062D:"}),c("p",{children:["\u062C\u0648\u0627\u0628 ",e("b",{children:t==null?void 0:t.correctOption})," \u06AF\u0632\u06CC\u0646\u0647 \u0635\u062D\u06CC\u062D \u0645\u06CC\u0628\u0627\u0634\u062F"]})]})]}),e(f,{children:e("div",{className:"text-center",children:e("button",{className:"btn btn-info",onClick:r,children:"\u0628\u0633\u062A\u0646"})})})]})},U=({close:s,id:r})=>{const t=m.exports.useRef([]),[l,n]=m.exports.useState(null),[u,d]=m.exports.useState(null),{mutate:i}=x({event:w,options:{onSuccess:()=>{b.invalidateQueries("testManagement"),s()}}}),{data:o}=y({event:M,values:r,eventOption:{queryKey:"getSingleQuestion"}}),p=()=>{const[a,h,N,E]=t.current;u&&l&&r&&i({title:u,optionA:a,optionB:h,optionC:N,optionD:E,correctOption:l,id:r})};return c(v,{children:[e(C,{children:e("h4",{className:"text-center",children:"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0633\u0648\u0627\u0644"})}),c(g,{children:[e(k,{data:o==null?void 0:o.title,changeValue:a=>d(a)}),[o==null?void 0:o.optionA,o==null?void 0:o.optionB,o==null?void 0:o.optionC,o==null?void 0:o.optionD].map((a,h)=>e(_,{changeValue:N=>t.current[h]=N,data:a,index:h,title:`\u062C\u0648\u0627\u0628 ${h+1}`},h)),e(D,{initCorrectOption:o==null?void 0:o.correctOption,changeValue:a=>n(a)})]}),e(f,{children:c("div",{className:"text-center",children:[e(F,{disabled:!0,type:"submit",className:"btn btn-success",onClick:p,children:"\u062A\u0627\u06CC\u06CC\u062F"}),"                "]})})]})},K=({close:s,id:r,name:t})=>{const{mutate:l}=x({event:T,options:{onSuccess:()=>{b.invalidateQueries("testManagement"),s()}}}),n=()=>{l(r)};return c("div",{className:"delete-question",children:[e(C,{children:e("h4",{className:"text-center",children:"\u062D\u0630\u0641 \u0633\u0648\u0627\u0644"})}),e(g,{children:c(v,{children:[e("p",{children:t.text}),t.image&&e("div",{className:"text-center mx-auto questions__image-title",children:e("img",{className:"h-100",src:t.image,alt:""})})]})}),e(f,{children:e("div",{className:"text-center",children:e(F,{type:"submit",className:"btn btn-success",onClick:n,children:"\u062A\u0627\u06CC\u06CC\u062F"})})})]})},J=({index:s,data:r})=>{const{title:{text:t,image:l},_id:n,createdAt:u,updatedAt:d}=r,{closeModal:i,openModal:o}=Q();return c("tr",{children:[e("td",{children:s+1}),e("td",{className:"text-overflow question-management__table-title-overflow",children:t}),e("td",{children:A({data:u!=null?u:""})}),e("td",{children:d?A({data:d}):"-"}),c("td",{className:"table__operation",children:[e(R,{onClick:()=>o(e(H,{id:n,close:i}),{style:{content:{width:"600px"}}}),className:"fa-eye"}),e(B,{onClick:()=>o(e(U,{id:n,close:i}),{style:{content:{width:"600px"}}}),className:"fa-edit"}),e(I,{onClick:()=>o(e(K,{name:{image:l!=null?l:"",text:t},id:n,close:i}),{style:{content:{width:"500px"}}}),className:"fa-trash"})]})]})};const Z=()=>{var o;const[s,r]=m.exports.useState(""),[t,l]=m.exports.useState(1),{closeModal:n,openModal:u}=Q(),{isLoading:d,data:i}=y({event:j,eventOption:{queryKey:["testManagement",t,s]},values:{page:t,search:s},options:{keepPreviousData:!0,cacheTime:0}});return c("section",{className:"question-management",children:[e("button",{className:"btn btn-primary mb-4",onClick:()=>u(e(V,{close:n}),{style:{content:{width:"600px"}}}),children:"\u0627\u0636\u0627\u0641\u0647 \u06A9\u0631\u062F\u0646 \u0633\u0648\u0627\u0644 \u062C\u062F\u06CC\u062F"}),e($,{data:i==null?void 0:i.questions,pages:i==null?void 0:i.pages,searchPlaceHolder:"\u062C\u0633\u062A\u062C\u0648\u06CC \u0633\u0648\u0627\u0644...",initPage:t,initValue:s,pageChange:p=>l(p),valueChange:p=>r(p),tableHeadingItem:["\u0631\u062F\u06CC\u0641","\u0639\u0646\u0648\u0627\u0646","\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u062C\u0627\u062F","\u062A\u0627\u0631\u06CC\u062E \u0648\u06CC\u0631\u0627\u06CC\u0634","\u0639\u0645\u0644\u06CC\u0627\u062A"],children:(o=i==null?void 0:i.questions)==null?void 0:o.map((p,a)=>e(J,{index:a,data:p},a))}),d&&"...",e(P,{data:i==null?void 0:i.questions})]})};export{Z as default};
